{{#partial "content"}}
    <hr>
    {{#if editEmployee}}
        <div class="form-div">
            <h1 class="form-title">Edit this Task!</h1>
            <form action="/employees/{{employee.id}}" method="post" class="form">
                <div class="mb-3 input-div">
                    <label for="firstName" class="form-label">Edit First name</label>
                    <input class="form-control border-bottom input-field" id="firstName" name="firstName" type="text" value="{{employee.firstName}}" required>
                </div>
                <div class="mb-3 input-div">
                    <label for="lastName" class="form-label">Edit Last name</label>
                    <input class="form-control border-bottom input-field" id="lastName" name="lastName" type="text"  value="{{employee.lastName}}" required>
                </div>
                <div class="mb-3 input-div">
                    <label for="userName" class="form-label">Edit Last name</label>
                    <input class="form-control border-bottom input-field" id="userName" name="userName" type="text"  value="{{employee.userName}}" required>
                </div>
                <div class="mb-3 input-div">
                    <label for="staffId" class="form-label">Edit Staff ID</label>
                    <input class="form-control border-bottom input-field" id="staffId" name="staffId" type="text" value="{{employee.staffId}}" required>
                </div>
                <div class="mb-3 input-div">
                    <label for="phoneNo" class="form-label">Edit Phone Number</label>
                    <input class="form-control border-bottom input-field" id="phoneNo" name="phone_no" type="text" value="{{employee.phoneNo}}" required>
                </div>
                <div class="mb-3 input-div">
                    <label for="email" class="form-label">Edit Email</label>
                    <input class="form-control border-bottom input-field" id="email" name="email" type="email" value="{{employee.email}}" required>
                </div>
                <div class="mb-3 input-div">
                    <label for="role" class="form-label">Edit Job Role</label>
                    <input class="form-control border-bottom input-field" id="role" name="role" type="text" value="{{employee.role}}" required>
                </div>
                <div class="mb-3 input-div">
                    <input class="form-control border-bottom input-field" id="updated" name="updated" type="hidden" value="{{employee.updated}}" required>
                </div>
                <script>
                    function time() {
                    let dt = new Date().toLocaleString()
                    document.getElementById('updated').value = dt
                    }
                </script>
                <div class="mb-3 input-div">
                    <label for="position_id" class="form-label">Change Position</label>
                    <select id="position_id" name="position_id" class="form-select text-info">
                        {{#each positions}}
                            <option value="{{id}}">{{name}}</option>
                        {{/each}}
                    </select>
                </div>
                <div class="mb-3 input-div">
                    <label for="department_id" class="form-label">Change Department</label>
                    <select id="department_id" name="department_id" class="form-select text-info">
                        {{#each departments}}
                            <option value="{{id}}">{{name}}</option>
                        {{/each}}
                    </select>
                </div>
                <div class="ms-auto">
                    <button type="submit" class="btn btn-success btn-sm mb-3" onclick="time()">Submit</button>
                    <button type="button" class="btn btn-danger btn-sm mb-3" onclick="window.location.href='/';">Cancel</button>
                </div>
                <p class="text-center">Don't see the right <span style="font-weight: bold">Department?</span><a href="/departments/new"> + New Department</a><br>
                    Or <br>the right <span style="font-weight: bold">Position?</span><a href="/positions/new"> + New Position</a></p>

            </form>
        </div>
    {{else if updated}}
        <div class="form-div">
            <div class="alert alert-success alert-dismissible fade show" role="alert" style="margin: auto;">
             <strong>  Success!</strong> {{updated}}.<br>
                <a href="/">  Home </a>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        </div>
    {{else}}
        <div class="form-div">
            {{#if errors}}
                <div class="alert alert-danger alert-dismissible fade show" role="alert">
                    <strong>  Error!</strong> {{errors}}. Confirm that the Staff ID, phone number and/or email address are unique.
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {{/if}}
            {{#if success}}
                <div class="alert alert-success alert-dismissible fade show" role="alert" style="margin: auto;">
                    <strong>  Success!</strong> {{success}}.<a href="/">  Home </a>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {{/if}}
            <h3 class="text-center form-title">Add Employee</h3>
            <form action="/employees" method="post" class="form">
                {{#if departments}}
                    {{#if positions}}
                        <div class="mb-3 input-div">
                            <label for="firstName" class="form-label">First name</label>
                            <input class="form-control border-bottom input-field" id="firstName" name="firstName" type="text" placeholder="Enter first name" required>
                        </div>
                        <div class="mb-3 input-div">
                            <label for="lastName" class="form-label">Last name</label>
                            <input class="form-control border-bottom input-field" id="lastName" name="lastName" type="text" placeholder="Enter last name" required>
                        </div>
                        <div class="mb-3 input-div">
                            <label for="userName" class="form-label">Last name</label>
                            <input class="form-control border-bottom input-field" id="userName" name="userName" type="text" placeholder="Enter user name" required>
                        </div>
                        <div class="mb-3 input-div">
                            <label for="staffId" class="form-label">Staff ID</label>
                            <input class="form-control border-bottom input-field" id="staffId" name="staffId" type="text" placeholder="Enter staff ID" required>
                        </div>
                        <div class="mb-3 input-div">
                            <label for="phoneNo" class="form-label">Phone Number</label>
                            <input class="form-control border-bottom input-field" id="phoneNo" name="phoneNo" type="text" placeholder="Enter Mobile Number" required>
                        </div>
                        <div class="mb-3 input-div">
                            <label for="email" class="form-label">Email</label>
                            <input class="form-control border-bottom input-field" id="email" name="email" type="email" placeholder="Enter email" required>
                        </div>
                        <div class="mb-3 input-div">
                            <label for="role" class="form-label">Job Role</label>
                            <input class="form-control border-bottom input-field" id="role" name="role" type="text" placeholder="Enter role e.g. Network Analyst" required>
                        </div>
                        <div class="mb-3 input-div">
                            <input class="form-control border-bottom input-field" id="created_at" name="created_at" type="hidden" required>
                        </div>
                        <script>
                        function created() {
                        let dt = new Date().toLocaleString()
                        document.getElementById('created_at').value = dt
                        }
                    </script>
                        <div class="mb-3 input-div">
                            <label for="position_id" class="form-label">Select Position</label>
                            <select id="position_id" name="position_id" class="form-select text-info">
                                {{#each positions}}
                                    <option value="{{id}}">{{name}}</option>
                                {{/each}}
                            </select>
                        </div>
                        <div class="mb-3 input-div">
                            <label for="department_id" class="form-label">Select Department</label>
                            <select id="department_id" name="department_id" class="form-select text-info">
                                {{#each departments}}
                                    <option value="{{id}}">{{name}}</option>
                                {{/each}}
                            </select>
                        </div>
                        <div>
                            <button type="submit" class="btn btn-success btn-sm mb-3" onclick="created()">Submit</button>
                            <button type="button" class="btn btn-danger btn-sm mb-3" onclick="window.location.href='/';">Cancel</button>
                        </div>
                        <p class="text-center">Don't see the right <span style="font-weight: bold">Department?</span><a href="/departments/new"> Add Department</a><br>
                            Or <br>the right <span style="font-weight: bold">Position?</span><a href="/positions/new"> Add Position</a></p>
                    {{else}}
                        <p class="text-center"> Add a Position before adding an Employee <a href="/positions/new">Add Position</a> </p>
                    {{/if}}
                {{else}}
                    <p class="text-center"> Add a Department before adding an Employee <a href="/departments/new">Add Department</a> </p>
                {{/if}}
            </form>
        </div>
    {{/if}}
{{/partial}}

{{> layout.hbs}}